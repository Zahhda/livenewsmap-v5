<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Account • Live News Map</title>
  <link rel="icon" type="image/png" href="/img/favicon.png" />
  <link rel="apple-touch-icon" href="/img/favicon.png" />
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="topbar">
    <a href="/" class="logo" style="text-decoration:none;color:inherit;font-weight:700">Live News Map</a>
    <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
      <a href="/" class="btn">Back to Home</a>
      <a id="adminBtn" href="/admin" class="btn">Admin</a>
      <button id="logoutBtn" class="btn">Logout</button>
    </div>
  </div>

  <main style="max-width:900px;margin:40px auto;padding:20px">
    <!-- Header Section -->
    <div style="margin-bottom:32px">
      <h1 style="font-size:28px;margin-bottom:8px;color:#fff;font-weight:700">My Account</h1>
      <p style="color:#888;margin:0;font-size:16px">Manage your profile and saved content</p>
    </div>

    <!-- Status Message -->
    <div id="status" style="margin-bottom:24px;padding:12px 16px;background:#1a1a1a;border:1px solid #333;border-radius:8px;color:#aaa;display:none">
      <div style="display:flex;align-items:center;gap:8px">
        <div class="loading-spinner" style="width:16px;height:16px;border:2px solid #333;border-top-color:#ff4d4d;border-radius:50%;animation:spin 1s linear infinite"></div>
        <span>Loading account information...</span>
      </div>
    </div>

    <!-- Profile Completion Notification -->
    <div id="profileNotification" style="margin-bottom:24px;padding:16px 20px;background:linear-gradient(135deg, #ff6b35, #f7931e);border:1px solid #ff8c42;border-radius:12px;color:#fff;display:none;box-shadow:0 4px 16px rgba(255, 107, 53, 0.3)">
      <div style="display:flex;align-items:center;gap:12px">
        <div style="width:24px;height:24px;background:rgba(255,255,255,0.2);border-radius:50%;display:flex;align-items:center;justify-content:center">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22,4 12,14.01 9,11.01"></polyline>
          </svg>
        </div>
        <div>
          <div style="font-weight:600;margin-bottom:4px">Complete Your Profile</div>
          <div style="font-size:14px;opacity:0.9" id="profileNotificationText">Please add your email and phone number for better account security.</div>
        </div>
        <button id="editProfileBtn" style="margin-left:auto;padding:8px 16px;background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.3);border-radius:6px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease">
          Edit Profile
        </button>
      </div>
    </div>

    <!-- Account Information Card -->
    <div id="card" class="card" style="padding:24px;border:1px solid #333;border-radius:16px;margin-bottom:32px;background:linear-gradient(135deg, #0b0b0b 0%, #111 100%);box-shadow:0 8px 32px rgba(0,0,0,0.3)">
      <div style="display:flex;align-items:center;gap:16px;margin-bottom:24px;padding-bottom:20px;border-bottom:1px solid #333">
        <div style="width:60px;height:60px;background:linear-gradient(135deg, #ff4d4d, #ff6b6b);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;color:#fff">
          <span id="userInitial">U</span>
        </div>
        <div style="flex:1">
          <h2 style="margin:0;font-size:20px;color:#fff;font-weight:600" id="userName">User Name</h2>
          <p style="margin:4px 0 0;color:#888;font-size:14px" id="userEmail">user@example.com</p>
        </div>
        <button id="editBtn" style="padding:8px 16px;background:#333;border:1px solid #555;border-radius:6px;color:#fff;font-size:14px;cursor:pointer;transition:all 0.2s ease">
          Edit
        </button>
      </div>

      <div style="display:grid;grid-template-columns:1fr;gap:20px">
        <div style="display:grid;grid-template-columns:150px 1fr;gap:16px;align-items:center;padding:12px 0;border-bottom:1px solid #222">
          <div style="font-weight:600;color:#999;font-size:14px;text-transform:uppercase;letter-spacing:0.5px">Name</div>
          <div style="display:flex;align-items:center;gap:8px">
            <div id="name" style="color:#fff;font-size:16px">—</div>
            <div id="nameStatus" style="width:8px;height:8px;border-radius:50%;background:#333"></div>
          </div>
        </div>

        <div style="display:grid;grid-template-columns:150px 1fr;gap:16px;align-items:center;padding:12px 0;border-bottom:1px solid #222">
          <div style="font-weight:600;color:#999;font-size:14px;text-transform:uppercase;letter-spacing:0.5px">Email</div>
          <div style="display:flex;align-items:center;gap:8px">
            <div id="email" style="color:#fff;font-size:16px">—</div>
            <div id="emailStatus" style="width:8px;height:8px;border-radius:50%;background:#333"></div>
          </div>
        </div>

        <div style="display:grid;grid-template-columns:150px 1fr;gap:16px;align-items:center;padding:12px 0;border-bottom:1px solid #222">
          <div style="font-weight:600;color:#999;font-size:14px;text-transform:uppercase;letter-spacing:0.5px">Phone</div>
          <div style="display:flex;align-items:center;gap:8px">
            <div id="phone" style="color:#fff;font-size:16px">—</div>
            <div id="phoneStatus" style="width:8px;height:8px;border-radius:50%;background:#333"></div>
          </div>
        </div>

        <div style="display:grid;grid-template-columns:150px 1fr;gap:16px;align-items:center;padding:12px 0;border-bottom:1px solid #222">
          <div style="font-weight:600;color:#999;font-size:14px;text-transform:uppercase;letter-spacing:0.5px">Role</div>
          <div id="role" style="color:#fff;font-size:16px">
            <span id="roleBadge" style="padding:4px 12px;background:#ff4d4d;color:#fff;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase">—</span>
          </div>
        </div>

        <div style="display:grid;grid-template-columns:150px 1fr;gap:16px;align-items:center;padding:12px 0">
          <div style="font-weight:600;color:#999;font-size:14px;text-transform:uppercase;letter-spacing:0.5px">Joined</div>
          <div id="joined" style="color:#888;font-size:16px">—</div>
        </div>
      </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editModal" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(4px)">
      <div style="background:#111;border:1px solid #333;border-radius:16px;padding:32px;max-width:500px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px rgba(0,0,0,0.5)">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:24px">
          <h2 style="margin:0;font-size:24px;color:#fff;font-weight:600">Edit Profile</h2>
          <button id="closeModal" style="background:none;border:none;color:#888;font-size:24px;cursor:pointer;padding:4px;border-radius:4px;transition:all 0.2s ease">
            ×
          </button>
        </div>

        <form id="editForm" style="display:grid;gap:20px">
          <div>
            <label style="display:block;margin-bottom:8px;color:#fff;font-weight:500;font-size:14px">Full Name</label>
            <input type="text" id="editName" style="width:100%;padding:12px 16px;background:#1a1a1a;border:1px solid #333;border-radius:8px;color:#fff;font-size:16px;transition:border-color 0.2s ease" placeholder="Enter your full name">
            <div id="nameError" style="color:#ff6b6b;font-size:12px;margin-top:4px;display:none"></div>
          </div>

          <div>
            <label style="display:block;margin-bottom:8px;color:#fff;font-weight:500;font-size:14px">Email Address</label>
            <input type="email" id="editEmail" style="width:100%;padding:12px 16px;background:#1a1a1a;border:1px solid #333;border-radius:8px;color:#fff;font-size:16px;transition:border-color 0.2s ease" placeholder="Enter your email address">
            <div id="emailError" style="color:#ff6b6b;font-size:12px;margin-top:4px;display:none"></div>
          </div>

          <div>
            <label style="display:block;margin-bottom:8px;color:#fff;font-weight:500;font-size:14px">Phone Number</label>
            <input type="tel" id="editPhone" style="width:100%;padding:12px 16px;background:#1a1a1a;border:1px solid #333;border-radius:8px;color:#fff;font-size:16px;transition:border-color 0.2s ease" placeholder="Enter your phone number">
            <div id="phoneError" style="color:#ff6b6b;font-size:12px;margin-top:4px;display:none"></div>
            <div style="color:#888;font-size:12px;margin-top:4px">Format: +1234567890 or (123) 456-7890</div>
          </div>

          <div style="display:flex;gap:12px;margin-top:8px">
            <button type="submit" style="flex:1;padding:12px 24px;background:linear-gradient(135deg, #ff4d4d, #ff6b6b);border:none;border-radius:8px;color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.2s ease">
              Save Changes
            </button>
            <button type="button" id="cancelEdit" style="flex:1;padding:12px 24px;background:#333;border:1px solid #555;border-radius:8px;color:#fff;font-size:16px;cursor:pointer;transition:all 0.2s ease">
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>


    <!-- Read Later Section -->
    <section class="saved-news" style="background:#0b0b0b;border:1px solid #333;border-radius:16px;padding:24px;box-shadow:0 8px 32px rgba(0,0,0,0.3)">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:20px">
        <div style="width:40px;height:40px;background:linear-gradient(135deg, #4d79ff, #6b8cff);border-radius:10px;display:flex;align-items:center;justify-content:center">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
          </svg>
        </div>
        <div>
          <h2 style="margin:0;font-size:20px;color:#fff;font-weight:600">Read Later</h2>
          <p style="margin:4px 0 0;color:#888;font-size:14px">Your saved articles for later reading</p>
        </div>
      </div>
      <div id="savedNewsBox" class="saved-news-list"></div>
    </section>
  </main>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/account.js"></script>
</body>
</html>
